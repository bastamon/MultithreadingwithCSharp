# MultithreadingwithCSharp
C#多线程实战

##  Thread 类的一些常用的 属性
<table class="reference notranslate" style="border:0px;border-collapse:collapse;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', Arial, sans-serif;font-size:12px;"><tbody style="border:0px;"><tr style="border:0px;background-color:rgb(246,244,240);"><th style="border:1px solid rgb(85,85,85);color:rgb(255,255,255);background-color:rgb(85,85,85);vertical-align:top;text-align:left;width:175px;">属性</th><th style="border:1px solid rgb(85,85,85);color:rgb(255,255,255);background-color:rgb(85,85,85);vertical-align:top;text-align:left;">描述</th></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">CurrentContext</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取线程正在其中执行的当前上下文。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">CurrentCulture</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取或设置当前线程的区域性。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">CurrentPrinciple</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取或设置线程的当前负责人（对基于角色的安全性而言）。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">CurrentThread</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取当前正在运行的线程。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">CurrentUICulture</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取或设置资源管理器使用的当前区域性以便在运行时查找区域性特定的资源。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">ExecutionContext</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取一个 ExecutionContext 对象，该对象包含有关当前线程的各种上下文的信息。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">IsAlive</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取一个值，该值指示当前线程的执行状态。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">IsBackground</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取或设置一个值，该值指示某个线程是否为后台线程。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">IsThreadPoolThread</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取一个值，该值指示线程是否属于托管线程池。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">ManagedThreadId</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取当前托管线程的唯一标识符。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">Name</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取或设置线程的名称。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">Priority</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取或设置一个值，该值指示线程的调度优先级。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">ThreadState</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;">获取一个值，该值包含当前线程的状态。</td></tr></tbody></table><p style="border:0px;line-height:2em;font-size:13px;font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', Arial, sans-serif;color:rgb(51,51,51);">下表列出了 <strong>Thread</strong> 类的一些常用的 <strong>方法</strong>：</p><table class="reference notranslate" style="border:0px;border-collapse:collapse;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', Arial, sans-serif;font-size:12px;"><tbody style="border:0px;"><tr style="border:0px;background-color:rgb(246,244,240);"><th style="border:1px solid rgb(85,85,85);color:rgb(255,255,255);background-color:rgb(85,85,85);vertical-align:top;text-align:left;width:29px;">序号</th><th style="border:1px solid rgb(85,85,85);color:rgb(255,255,255);background-color:rgb(85,85,85);vertical-align:top;text-align:left;">方法名 &amp; 描述</th></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">1</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public void Abort()</strong><br />在调用此方法的线程上引发 ThreadAbortException，以开始终止此线程的过程。调用此方法通常会终止线程。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">2</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static LocalDataStoreSlot AllocateDataSlot()</strong><br />在所有的线程上分配未命名的数据槽。为了获得更好的性能，请改用以 ThreadStaticAttribute 属性标记的字段。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">3</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static LocalDataStoreSlot AllocateNamedDataSlot( string name) </strong><br />在所有线程上分配已命名的数据槽。为了获得更好的性能，请改用以 ThreadStaticAttribute 属性标记的字段。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">4</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void BeginCriticalRegion()</strong><br />通知主机执行将要进入一个代码区域，在该代码区域内线程中止或未经处理的异常的影响可能会危害应用程序域中的其他任务。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">5</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void BeginThreadAffinity()</strong><br />通知主机托管代码将要执行依赖于当前物理操作系统线程的标识的指令。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">6</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void EndCriticalRegion()</strong><br />通知主机执行将要进入一个代码区域，在该代码区域内线程中止或未经处理的异常仅影响当前任务。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">7</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void EndThreadAffinity()</strong><br />通知主机托管代码已执行完依赖于当前物理操作系统线程的标识的指令。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">8</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void FreeNamedDataSlot(string name)</strong><br />为进程中的所有线程消除名称与槽之间的关联。为了获得更好的性能，请改用以 ThreadStaticAttribute 属性标记的字段。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">9</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static Object GetData( LocalDataStoreSlot slot ) </strong><br />在当前线程的当前域中从当前线程上指定的槽中检索值。为了获得更好的性能，请改用以 ThreadStaticAttribute 属性标记的字段。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">10</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static AppDomain GetDomain()</strong><br />返回当前线程正在其中运行的当前域。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">11</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static AppDomain GetDomainID()</strong><br />返回唯一的应用程序域标识符。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">12</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static LocalDataStoreSlot GetNamedDataSlot( string name ) </strong><br />查找已命名的数据槽。为了获得更好的性能，请改用以 ThreadStaticAttribute 属性标记的字段。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">13</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public void Interrupt()</strong><br />中断处于 WaitSleepJoin 线程状态的线程。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">14</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public void Join()</strong><br />在继续执行标准的 COM 和 SendMessage 消息泵处理期间，阻塞调用线程，直到某个线程终止为止。此方法有不同的重载形式。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">15</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void MemoryBarrier()</strong><br />按如下方式同步内存存取：执行当前线程的处理器在对指令重新排序时，不能采用先执行 MemoryBarrier 调用之后的内存存取，再执行 MemoryBarrier 调用之前的内存存取的方式。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">16</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void ResetAbort()</strong><br />取消为当前线程请求的 Abort。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">17</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void SetData( LocalDataStoreSlot slot, Object data ) </strong><br />在当前正在运行的线程上为此线程的当前域在指定槽中设置数据。为了获得更好的性能，请改用以 ThreadStaticAttribute 属性标记的字段。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">18</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public void Start()</strong><br />开始一个线程。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">19</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void Sleep( int millisecondsTimeout ) </strong><br />让线程暂停一段时间。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">20</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void SpinWait( int iterations ) </strong><br />导致线程等待由 iterations 参数定义的时间量。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">21</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static byte VolatileRead( ref byte address )<br />public static double VolatileRead( ref double address )<br />public static int VolatileRead( ref int address )<br />public static Object VolatileRead( ref Object address ) </strong><br />读取字段值。无论处理器的数目或处理器缓存的状态如何，该值都是由计算机的任何处理器写入的最新值。此方法有不同的重载形式。这里只给出了一些形式。</td></tr><tr style="border:0px;background-color:rgb(246,244,240);"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">22</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static void VolatileWrite( ref byte address, byte value )<br />public static void VolatileWrite( ref double address, double value )<br />public static void VolatileWrite( ref int address, int value )<br />public static void VolatileWrite( ref Object address, Object value ) </strong><br />立即向字段写入一个值，以使该值对计算机中的所有处理器都可见。此方法有不同的重载形式。这里只给出了一些形式。</td></tr><tr style="border:0px;"><td style="border:1px solid rgb(212,212,212);font-size:13px;min-width:24px;line-height:2em;vertical-align:top;">23</td><td style="border:1px solid rgb(212,212,212);font-size:13px;line-height:2em;min-width:24px;vertical-align:top;"><strong>public static bool Yield()</strong><br />导致调用线程执行准备好在当前处理器上运行的另一个线程。由操作系统选择要执行的线程。</td></tr></tbody></table>

##

